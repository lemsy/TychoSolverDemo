<div class="sudoku-demo">
    <h2>Sudoku Solver Demo</h2>
    <p>Watch as the genetic algorithm solves a 9x9 Sudoku puzzle in real-time!</p>

    <div class="demo-container">
        <!-- Controls -->
        <div class="controls">
            <div class="parameter-group">
                <label>Population Size:</label>
                <input type="number" [(ngModel)]="populationSize" [disabled]="isRunning()" min="10" max="200" step="10">
            </div>

            <div class="parameter-group">
                <label>Max Iterations:</label>
                <input type="number" [(ngModel)]="maxIterations" [disabled]="isRunning()" min="100" max="10000"
                    step="100">
            </div>

            <div class="parameter-group">
                <label>Mutation Rate:</label>
                <input type="number" [(ngModel)]="mutationRate" [disabled]="isRunning()" min="0.01" max="0.5"
                    step="0.01">
            </div>

            <div class="button-group">
                <button (click)="startSolving()" [disabled]="isRunning()" class="btn-primary">
                    {{isRunning() ? 'Solving...' : 'Start Solving'}}
                </button>

                <button (click)="resetPuzzle()" [disabled]="isRunning()" class="btn-secondary">
                    Reset Puzzle
                </button>
            </div>
        </div>

        <!-- Sudoku Grid -->
        <div class="sudoku-container">
            <div class="sudoku-grid" #sudokuGrid></div>
        </div>

        <!-- Progress Chart -->
        <div class="progress-container">
            <h3>Evolution Progress</h3>
            <div class="chart" #progressChart></div>

            @if (currentProgress()) {
            <div class="progress-info">
                <div class="progress-item">
                    <span class="label">Iteration:</span>
                    <span class="value">{{currentProgress()?.iteration}}</span>
                </div>
                <div class="progress-item">
                    <span class="label">Current Fitness:</span>
                    <span class="value">{{currentProgress()?.currentFitness}}</span>
                </div>
                <div class="progress-item">
                    <span class="label">Best Fitness:</span>
                    <span class="value">{{currentProgress()?.bestFitness}}</span>
                </div>
                <div class="progress-item">
                    <span class="label">Progress:</span>
                    <span class="value">{{((currentProgress()?.bestFitness || 0) / 243 * 100).toFixed(1)}}%</span>
                </div>
            </div>
            }
        </div>
    </div>

    <!-- Results -->
    @if (result()) {
    <div class="results">
        <h3>Solution Found!</h3>
        <div class="result-stats">
            <div class="stat">
                <span class="label">Final Fitness:</span>
                <span class="value">{{result()?.fitness}}</span>
            </div>
            <div class="stat">
                <span class="label">Iterations:</span>
                <span class="value">{{result()?.iterations}}</span>
            </div>
            <div class="stat">
                <span class="label">Execution Time:</span>
                <span class="value">{{result()?.executionTime}}ms</span>
            </div>
            <div class="stat">
                <span class="label">Success Rate:</span>
                <span class="value">{{((result()?.fitness || 0) / 243 * 100).toFixed(1)}}%</span>
            </div>
        </div>
    </div>
    }
</div>